

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; trustos master documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="use_cases.html" />
    <link rel="prev" title="}" href="id.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> trustos
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br>
<a style="width:100%;" href="index.html">
    <h1 style="color: white; font-size:220%; margin-bottom:2px;">TrustOS</h1>
</a>
<img style="background:none; margin: auto;  width:30%; height:95%;" alt="Telefónica"
    src="_static/images/telefonica_white.png" />

<!-- 
<a href="https://github.com/hyperledger/fabric"></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a> -->


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="track.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id16">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id21">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id37">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id42">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id47">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id52">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id57">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id62">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id28">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id75">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id86">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id97">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id108">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settle.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id14">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id17">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id23">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id26">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id29">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id35">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id38">}</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trustos</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorials.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Tutorials</p>
<p>In this section you will find snipets of code to integrate API calls to your page</p>
<p>## Postman</p>
<p>Postman is a fantastic software that lets us run requests against our APIs.</p>
<p>One of the many great tools of Postman are collections, sets of grouped requests that can be exported/imported, in order to be run all together for testing purposes.</p>
<p>### Postman collection</p>
<ol class="arabic">
<li><p>First, download the collections we have created on the folder <strong>miscelanea/postman</strong></p>
<p>You will see 2 diferent files: <strong>collections</strong> and <strong>enviroment</strong>. Download both, as we will explain later what are enviroments for.</p>
</li>
<li><p>On Postman, click on “Import” , and then select <strong>Import file</strong>.</p>
<p>After doing so, on the left pannel you should see the collection you just imported, as shown in the image</p>
<p>![alt text](images/postman/import.png “Collections”)</p>
</li>
<li><dl>
<dt>Now that we can see the collection, lets take a</dt><dd><p>look at the URL for which the request is being made:</p>
<p>![alt text](images/postman/enviroment.png “Enviroment variables”)</p>
</dd>
</dl>
</li>
</ol>
<p>We can see that the URL contains: ” {{url}} “</p>
<p>This is a variable in POSTMAN. The nice things about using variables, is that we can change the endpoints of the APIs without having to modify the requests, but only the <strong>enviroment</strong> file, where the enviroment variables are specified.</p>
<p>To load a specific enviroment file, click the configuration button, manage enviroment, and select the enviroment file you want to load.</p>
<p>![alt text](images/postman/manage.png “Manage variables”)</p>
<p>Great! Now, by clicking on the eye, you can watch the <strong>actual values</strong> of the enviroment values</p>
<p>![alt text](images/postman/current_enviroment.png “Manage variables”)</p>
<p><strong>Side note</strong>
Why do we say “actual values”? Because values can change dinamically</p>
<p>We can see that under the URL field there are some others others.</p>
<p>Concretely, <strong>pre-reqest scripts</strong> are scripts that execute right before the query is made, where <strong>tests</strong> are scripts that execute after the request is made.</p>
<p>![alt text](images/postman/login.png “Manage variables”)</p>
<p>Luckily you dont have to worry about this, since we have already taken care of it.
When you execute the login request, the Auth token received is set as the value of the variable “AuthToken”, which is later used in the <strong>Header</strong> tab (as can be seen in the second image of this tutorial)</p>
<ol class="arabic simple" start="4">
<li><p>Finally, now that we have everything set up, click on the “Runner” tab on the top left of the screen. Select the collection you want to run, the enviroment file you want to use for this collection, and run the tests!</p></li>
</ol>
<blockquote>
<div><p>![alt text](images/postman/runner.png “Runner”)</p>
</div></blockquote>
<p>## Managing requests</p>
<p>### NodeJS
#### Axios library
Axios is a promise based HTTP client for the browser. Using promises is great when dealing with code that requres chains of events.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>javascript
const axios = require(‘axios’);</p>
<dl>
<dt>axios.post(‘<a class="reference external" href="https://trustapi.tid.es/trust/asset">https://trustapi.tid.es/trust/asset</a>’, {</dt><dd><dl class="simple">
<dt>headers: {</dt><dd><p>Authorization: ‘Bearer ‘ + token // Token is a variable that stores the JWT</p>
</dd>
</dl>
</dd>
<dt>},</dt><dd><dl class="simple">
<dt>body: {</dt><dd><p>‘input’:’whatever’</p>
</dd>
</dl>
<p>})</p>
<dl class="simple">
<dt>.then(response =&gt; {</dt><dd><p>console.log(response.data.url);
console.log(response.data.explanation);</p>
</dd>
</dl>
<p>})
.catch(error =&gt; {</p>
<blockquote>
<div><p>console.log(error);</p>
</div></blockquote>
<p>});</p>
</dd>
</dl>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>#### HTTP
If you dont want to use third party libraries,you can use node http standard module. However, this option is a little more verbose than the preceding one</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>javascript</p>
<p>const https = require(‘https’)</p>
<dl class="simple">
<dt>const data = JSON.stringify({</dt><dd><p>input: ‘whatever’</p>
</dd>
</dl>
<p>})</p>
<dl>
<dt>const options = {</dt><dd><p>hostname: ‘<a class="reference external" href="https://trustapi.tid.es/">https://trustapi.tid.es/</a>’,</p>
<p>path: ‘/trust/asset/create’,
method: ‘POST’,
headers: {</p>
<blockquote>
<div><p>‘Content-Type’: ‘application/json’,
‘Content-Length’: data.length,
‘Authorization’: ‘Bearer ‘+token  // Where token is the JWT</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
<dl>
<dt>const req = https.request(options, (res) =&gt; {</dt><dd><p>console.log(<cite>statusCode: ${res.statusCode}</cite>)</p>
<dl class="simple">
<dt>res.on(‘data’, (d) =&gt; {</dt><dd><p>process.stdout.write(d)</p>
</dd>
</dl>
<p>})</p>
</dd>
</dl>
<p>})</p>
<dl class="simple">
<dt>req.on(‘error’, (error) =&gt; {</dt><dd><p>console.error(error)</p>
</dd>
</dl>
<p>})</p>
<p>req.write(data)
req.end()</p>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>### Python
#### Requests
You dont really want to use any other module!</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a>` python
import requests</p>
<p>auth_token=’kbkcmbkcmbkcbc9ic9vixc9vixc9v’
hed = {‘Authorization’: ‘Bearer ‘ + auth_token}
data = {‘app’ : ‘aaaaa’}</p>
<p>url = ‘<a class="reference external" href="https://trustapi.tid.es/trust/asset">https://trustapi.tid.es/trust/asset</a>’
response = requests.post(url, json=data, headers=hed)
print(response)
print(response.json())
<a href="#id19"><span class="problematic" id="id20">``</span></a><a href="#id21"><span class="problematic" id="id22">`</span></a></p>
<p>### Shell
Lets not forget our old friend curl. This way can also be integrated in any other programming language calling something like exec.shell(command)</p>
<p><code class="docutils literal notranslate"><span class="pre">`shell</span>
<span class="pre">curl</span> <span class="pre">-X</span> <span class="pre">POST</span> <span class="pre">&quot;https://trustapi.tid.es/trust/asset/create&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;accept:</span> <span class="pre">application/json&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Authorization:</span> <span class="pre">Bearer</span> <span class="pre">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoidGVzdCIsImV4cCI6MTU2MTEyMjMwOX0.Qu28A580dTOXPAX9bKsnEuHRk8NxFLGL0iPkK5RuOKg&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Content-Type:</span> <span class="pre">application/json&quot;</span> <span class="pre">-d</span> <span class="pre">&quot;{</span> <span class="pre">\&quot;assetid\&quot;:</span> <span class="pre">\&quot;1\&quot;,</span> <span class="pre">\&quot;data\&quot;:</span> <span class="pre">{},</span> <span class="pre">\&quot;metadata\&quot;:</span> <span class="pre">{},</span> <span class="pre">\&quot;registerInEthereum\&quot;:</span> <span class="pre">\&quot;true/false\&quot;}&quot;</span>
<span class="pre">`</span></code></p>
<p>## ReactJS</p>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="use_cases.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="id.html" class="btn btn-neutral" title="}" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <!-- <div role="contentinfo">
    <p>
        &copy; Copyright Telefónica 2020.

    </p>
  </div> -->
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>