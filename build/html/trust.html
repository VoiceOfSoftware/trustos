

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Trust &mdash; trustos master documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="TrustID" href="id.html" />
    <link rel="prev" title="Settle" href="settle.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> trustos
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br>
<a style="width:100%;" href="index.html">
    <h1 style="color: white; font-size:220%; margin-bottom:2px;">TrustOS</h1>
</a>
<img style="background:none; margin: auto;  width:30%; height:95%;" alt="Telefónica"
    src="_static/images/telefonica_white.png" />

<!-- 
<a href="https://github.com/hyperledger/fabric"></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a> -->


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html">Track</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html">Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="settle.html">Settle</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Trust</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-specification">API Specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#trust-point">Trust Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="#methods">Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-trust-assetid">GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trust-assetid-history">GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId/history</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-trust-assetid-create">POST -  <code class="docutils literal notranslate"><span class="pre">/trust/assetId/create</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trust-assetid-merkleroot">GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/{assetId}/merkleroot</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trust-assetid-merkleroot-history">GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/{assetId}/merkleroot/history</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-trust-assetid-register">POST -  <code class="docutils literal notranslate"><span class="pre">/trust/assetId/register</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-trust-assetid-verify">POST   -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId/verify</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#merkleroot">MerkleRoot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#architecture-of-the-project">Architecture of the project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-we-run-the-application">How we run the application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-the-application">Testing the Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#errors-management">Errors management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="id.html">TrustID</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trustos</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Trust</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/trust.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="trust">
<h1>Trust<a class="headerlink" href="#trust" title="Permalink to this headline">¶</a></h1>
<p>This API is used to create and register trust points on the private and public blockchain and verify the integrity of all the encapsulated data</p>
<div class="section" id="api-specification">
<h2>API Specification<a class="headerlink" href="#api-specification" title="Permalink to this headline">¶</a></h2>
<p>An abstraction API with all the asset functionalities</p>
<div class="section" id="trust-point">
<h3>Trust Point<a class="headerlink" href="#trust-point" title="Permalink to this headline">¶</a></h3>
<p>A trust point is <code class="docutils literal notranslate"><span class="pre">&lt;JSON&gt;</span></code> object used to export the integrity of the transactions over an asset in a private blockchain such as Hyperledger Fabric, to public blockchains such as Ethereum, in order to provide an extra layer of security.</p>
<p>This is the structure of a trust point:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code> Timestamp for the previous trust point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code> Timestamp at which this trust point is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">txRoot</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Hash of all transactions in the interval</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hfTxId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Current trust point transaction in Hyperledger Fabric</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prevHfTxId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Previous trust point transaction in Hyperledger Fabric</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prevHash</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Hash of the previous trust point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ethereumContractAddress</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> The smart contract in Ethereum to manage trust points</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Hash of the trust point (as a JSON) to verify integrity</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;assetid&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1557830077</span><span class="p">,</span>
    <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;DGjUiCplVGom99o6bbdIXAIEqNKgVoQGi7rFNwDX+to=&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;671e8c065add74a4759167b9f38cf67916f0f26b5e9b1861c2abcb08a57f8a97&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prevHash&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0xeE83b6D6dc84fa0c91A6f99971f6CF29F6B7ea3b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;3P1HZ+pvbwhogR3tgKng7cWTk6uaHynGKvjqPjpISi0=&quot;</span>

  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
<br></div>
<div class="section" id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<p><img alt="TrustAPI methods" src="_images/trust_swagger.png" /></p>
<details>
  <summary><em><strong>Trust methods</strong></em> (Click to expand)</summary><hr class="docutils" />
<div class="section" id="get-trust-assetid">
<h4>GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId</span></code><a class="headerlink" href="#get-trust-assetid" title="Permalink to this headline">¶</a></h4>
<p>Gets the last trust point in the system for a specific asset</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustpoint</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;assetId&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
      <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;5c709f206555dbc6a40e37e96aa007a471f706927c8581fb91aef3625413e234&quot;</span><span class="p">,</span>
      <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;prevHash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;70c26cfc9aeef3c094b82278b7ed413255f07711366ac2a9da8de7e66b9e53ee&quot;</span><span class="p">,</span>
      <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;TBSNvFDt3tGDhI5I48IRlBh2l+O0X+kjBq7/96Zk/wI=&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-trust-assetid-history">
<h4>GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId/history</span></code><a class="headerlink" href="#get-trust-assetid-history" title="Permalink to this headline">¶</a></h4>
<p>Gets all trust point history in the system for a specific asset</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustpoint</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;assetId&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
      <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;70c26cfc9aeef3c094b82278b7ed413255f07711366ac2a9da8de7e66b9e53ee&quot;</span><span class="p">,</span>
      <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;oGFYgnxCcPvpa2d6G4vHLs92HQgY2z6S8uwIVM0Qg44=&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;assetId&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
      <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;5c709f206555dbc6a40e37e96aa007a471f706927c8581fb91aef3625413e234&quot;</span><span class="p">,</span>
      <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;prevHash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;70c26cfc9aeef3c094b82278b7ed413255f07711366ac2a9da8de7e66b9e53ee&quot;</span><span class="p">,</span>
      <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;TBSNvFDt3tGDhI5I48IRlBh2l+O0X+kjBq7/96Zk/wI=&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-trust-assetid-create">
<h4>POST -  <code class="docutils literal notranslate"><span class="pre">/trust/assetId/create</span></code><a class="headerlink" href="#post-trust-assetid-create" title="Permalink to this headline">¶</a></h4>
<p>Creates a trust point in the system for a specific asset</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustpoint</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;assetId&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
      <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;5c709f206555dbc6a40e37e96aa007a471f706927c8581fb91aef3625413e234&quot;</span><span class="p">,</span>
      <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;prevHash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;70c26cfc9aeef3c094b82278b7ed413255f07711366ac2a9da8de7e66b9e53ee&quot;</span><span class="p">,</span>
      <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;TBSNvFDt3tGDhI5I48IRlBh2l+O0X+kjBq7/96Zk/wI=&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-trust-assetid-merkleroot">
<h4>GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/{assetId}/merkleroot</span></code><a class="headerlink" href="#get-trust-assetid-merkleroot" title="Permalink to this headline">¶</a></h4>
<p>Gets the last trust merkle root stored in the system</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust root is stored</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustroot</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
    <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;/unY4B8YDNq/+mdO1iL/Ztng+gbxBput2qnjG+LGMqU=&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-trust-assetid-merkleroot-history">
<h4>GET  -   <code class="docutils literal notranslate"><span class="pre">/trust/{assetId}/merkleroot/history</span></code><a class="headerlink" href="#get-trust-assetid-merkleroot-history" title="Permalink to this headline">¶</a></h4>
<p>Gets the trust merkle root history stored in the system</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust root is stored</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustroot</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;Vz3ZFr+wTOt0FNbcfhEr+Ziy/Y/jsfNGz693KcqYa5E=&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;/unY4B8YDNq/+mdO1iL/Ztng+gbxBput2qnjG+LGMqU=&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-trust-assetid-register">
<h4>POST -  <code class="docutils literal notranslate"><span class="pre">/trust/assetId/register</span></code><a class="headerlink" href="#post-trust-assetid-register" title="Permalink to this headline">¶</a></h4>
<p>Creates a trust point if does not exist and registers it in Ethereum. If the trust point already exists registers it in Ethereum.</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trustpoint</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span>  <span class="p">{</span>
      <span class="s2">&quot;assetId&quot;</span><span class="o">:</span> <span class="s2">&quot;exampleAsset&quot;</span><span class="p">,</span>
      <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;ethereumContractAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;5c709f206555dbc6a40e37e96aa007a471f706927c8581fb91aef3625413e234&quot;</span><span class="p">,</span>
      <span class="s2">&quot;init&quot;</span><span class="o">:</span> <span class="mi">1567594895</span><span class="p">,</span>
      <span class="s2">&quot;prevHash&quot;</span><span class="o">:</span> <span class="s2">&quot;Ni7JYQG6GSmlEjWoRj2xrfF6ZVFhqBDPzyjk+o/HB2c=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;prevHfTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;70c26cfc9aeef3c094b82278b7ed413255f07711366ac2a9da8de7e66b9e53ee&quot;</span><span class="p">,</span>
      <span class="s2">&quot;txRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;TBSNvFDt3tGDhI5I48IRlBh2l+O0X+kjBq7/96Zk/wI=&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-trust-assetid-verify">
<h4>POST   -   <code class="docutils literal notranslate"><span class="pre">/trust/assetId/verify</span></code><a class="headerlink" href="#post-trust-assetid-verify" title="Permalink to this headline">¶</a></h4>
<p>Verifies a trust point</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">assetid</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Identifier of the asset for which the trust point is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> : <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Timestamp at which this trust point is made</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="s2">&quot;1559822594&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</details><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ethereum</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code> Ethereum info</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">trustRoot</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Trust points merkle root registered on Ethereum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lastEthTxId</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Last transaction for the trust point in Ethereum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">smartContractAddres</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> The smart contract in Ethereum to manage trust points</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verified</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;bool&gt;</span></code> Boolean value to specify if the trust point is registered in Ethereum</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">hf</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code> Hyperledger Fabric info</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">trustRoot</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Trust points merkle root stored in HF</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Timestamp at which this trust point is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verified</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;bool&gt;</span></code> Boolean value to specify if the trust point is registered in Ethereum and it is has not been modified</p></li>
</ul>
</li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;ethereum&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;lastEthTxId&quot;</span><span class="o">:</span> <span class="s2">&quot;0x8ad8f928c261a5b7f2b6515320dfffe1f9f923b17c5e07f6f733f43703f95f87&quot;</span><span class="p">,</span>
      <span class="s2">&quot;smartContractAddres&quot;</span><span class="o">:</span> <span class="s2">&quot;0x1B646bc6C3465Fa8171F7171097A7d8e37b43D6B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;NGz693K+cqYasFNbcfhEr+Ziy/Y/jsfOt0FNKcqYa5E=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;/unY4B8YDNq/+mdO1iL/Ztng+gbxBput2qnjG+LGMqU=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;verified&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">&quot;hf&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
      <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;NGz693K+cqYasFNbcfhEr+Ziy/Y/jsfOt0FNKcqYa5E=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;/unY4B8YDNq/+mdO1iL/Ztng+gbxBput2qnjG+LGMqU=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;verified&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
</details>
<br></div>
</div>
<div class="section" id="merkleroot">
<h3>MerkleRoot<a class="headerlink" href="#merkleroot" title="Permalink to this headline">¶</a></h3>
<p>In order to achieve the integrity and inmutability of all trust points, every time a trust point is create a parallel process is executed. This process consist of the building of a trust-based merkle tree. All the trust points created until that moment are the leaves of the tree that generates a unique merkle root. That merkle root, called as trustRoot, is registered in HF as well as in Ethereum to proof the integrity. So, every time a new trust point is created, a new trustRoot is created too, and it could be registered in Ethereum or not, depends of the user neccessity</p>
<p>This is the structure registered in HF and Ethereum, once the trust merkle tree is calculated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code> Timestamp at which the related trust point is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trustHash</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Hash of the last trust point included to verify integrity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trustRoot</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Root of the trust merkle tree calculated with all the trust points until that moment</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1567601354</span><span class="p">,</span>
    <span class="s2">&quot;trustHash&quot;</span><span class="o">:</span> <span class="s2">&quot;7KYLJXcjGA67WD0v95UvoVPk+sj9M8FdpecS5mRz3+s=&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trustRoot&quot;</span><span class="o">:</span> <span class="s2">&quot;/unY4B8YDNq/+mdO1iL/Ztng+gbxBput2qnjG+LGMqU=&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
<br></div>
</div>
<div class="section" id="architecture-of-the-project">
<h2>Architecture of the project<a class="headerlink" href="#architecture-of-the-project" title="Permalink to this headline">¶</a></h2>
<p>The project is based on the open-source programming language: Golang. An abstraction of its skeleton is depicted in the diagram below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>coren-trustapi
├── api
      ├── handler           // HTTP logic
      ├── model             // models used by the application
      ├── service           // Usecases logic
      ├── util              // Tools used by the application
          ├── log           // Logger tool
          ├── http          // Http util
          └── Config        // Tool to load the configuration from yaml files
      └── app.go            // Router application
├── config
      └── config.yaml       // Config file
├── docs
      └── docs.go           // Swagger doc file
├── postman                 // Postman collection and environment to test the API
      ├── collection    
      └── environment
├── docker-compose.yaml     // Instructions to build docker container
├── Dockerfile              // Instructions to build docker image
├── init.sh                 // Script with global environment variables
└── main.go                 // Main app
</pre></div>
</div>
</div>
<div class="section" id="how-we-run-the-application">
<h2>How we run the application<a class="headerlink" href="#how-we-run-the-application" title="Permalink to this headline">¶</a></h2>
<p>As you could see in the <a class="reference external" href="architecture.html">Architecture</a> module, all the applications are running on cloud. Through Kubernetes orchestration system the application deployment, scaling and management is an easy and automated task.</p>
</div>
<div class="section" id="testing-the-application">
<h2>Testing the Application<a class="headerlink" href="#testing-the-application" title="Permalink to this headline">¶</a></h2>
<p>In postman folder there are the related collection and environment to interact and test with the API methods. It is only needed to import them into postman application and know to use the coren-trustapi module.</p>
<p>Also you can download the files in the links below:</p>
<p><a href="_static/trustapi.collection.json" download> - Postman collection</a>
<br>
<a href="_static/environment.json" download> - Postman environment</a></p>
</div>
<div class="section" id="errors-management">
<h2>Errors management<a class="headerlink" href="#errors-management" title="Permalink to this headline">¶</a></h2>
<p>Trust API errors are managed through the following nomenclature <strong>TRUST-XX</strong> which corresponds to:<br></p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
.tg .tg-0lax{text-align:left;vertical-align:top}
</style><table class="tg">
  <tr>
    <th class="tg-0pky">Code</th>
    <th class="tg-0pky">Description</th>
  </tr>
  <tr>
    <td class="tg-0pky">TRUST-00</td>
    <td class="tg-0pky">Service is down</td>
  </tr>
  <tr>
    <td class="tg-0pky">TRUST-01</td>
    <td class="tg-0pky">Error parsing any data structure</td>
  </tr>
  <tr>
    <td class="tg-0lax">TRUST-02</td>
    <td class="tg-0lax">Error of some kind of functionality</td>
  </tr>
</table><br></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="id.html" class="btn btn-neutral float-right" title="TrustID" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="settle.html" class="btn btn-neutral" title="Settle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <!-- <div role="contentinfo">
    <p>
        &copy; Copyright Telefónica 2020.

    </p>
  </div> -->
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>