

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>} &mdash; trustos master documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="}" href="settle.html" />
    <link rel="prev" title="}" href="track.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> trustos
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br>
<a style="width:100%;" href="index.html">
    <h1 style="color: white; font-size:220%; margin-bottom:2px;">TrustOS</h1>
</a>
<img style="background:none; margin: auto;  width:30%; height:95%;" alt="Telefónica"
    src="_static/images/telefonica_white.png" />

<!-- 
<a href="https://github.com/hyperledger/fabric"></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a> -->


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="track.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id16">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id21">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id37">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id42">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id47">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id52">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id57">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html#id62">}</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id28">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id75">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id86">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id97">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id108">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settle.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id14">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id17">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id23">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id26">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id29">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id35">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id38">}</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trustos</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>}</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/token.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Token</p>
<p>Token API allows developers to easily create, transfer and get transferable tokens on the Hyperledger Fabric network. Through this API giving transferable value to simple assets can generate new markets and gamification strategies.</p>
<p>## API Specification</p>
<p>An abstraction API with all the token functionalities.</p>
<p>### Token</p>
<p>A token is an asset that gets a transferable value on the blockchain network and can represent whatever it can be imagined, either an abstract or real/physic thing. The term is a little bit confusing at first, since a token can represent the whole class, in which the total supply is declarated, or individual tokens (balances) transferable between users.</p>
<p>Every token has the following structure:
- <cite>name</cite> :  <cite>&lt;string&gt;</cite>  Name of the generic token
- <cite>symbol</cite> : <cite>&lt;string&gt;</cite> Shortname for the token
- <cite>owner</cite> :  <cite>id&lt;string&gt;:company&lt;string&gt;</cite>  Owner of the token. It has to be specified the ID of the owner and the ID of the organization it belongs to inside the organization
- <cite>ethereumAddress</cite>: <cite>&lt;string&gt;</cite> Address in the Ethereum blockchain, in case we want to link it to a public blockchain token
- <cite>totalSupply</cite> :  <cite>&lt;integer&gt;</cite> Total number of individual tokens issued</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>js
{</p>
<blockquote>
<div><p>“name”: “KARMA”,
“symbol”: “KRM”,
“owner”: “bteam:org1MSP”,
“ethereumAddress”: “0x320aty492ua90suf9a0veuf903as3q82”,
“totalSupply”: 99999999999999</p>
</div></blockquote>
<div class="section" id="id5">
<h1>}<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>### Methods</p>
<p>![TokenAPI methods](./images/token_swagger.png)</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Token methods&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p>—</p>
<p>#### POST   -   <cite>/token/create</cite></p>
<p>Initialize a new token in the network with some specific information</p>
<p><em>Input</em>
- <cite>name</cite> :  <cite>&lt;string&gt;</cite> Name of the token
- <cite>symbol</cite> : <cite>&lt;string&gt;</cite> Shortname of the token
- <cite>owner</cite> :  <cite>identifier&lt;string&gt;:company&lt;string&gt;</cite> Owner of the token contract
- <cite>ethereumAddress</cite> :  <cite>&lt;string&gt;</cite> This address represents the smart contract in Ethereum associated to the token. At the moment is given as an input, but in future releases it will be created by the chaincode and given to the developer as a response
- <cite>totalSupply</cite> :  <cite>&lt;integer&gt;</cite>  Total amount of individual tokens that will be created</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>js</p>
<dl class="simple">
<dt>{</dt><dd><p>“name”: “KARMA”,
“symbol”: “KRM”,
“owner”: “bteam:org1MSP”,
“ethereumAddress”: “0x0”,
“totalSupply”: 99999999999999</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id10"><span class="problematic" id="id11">``</span></a>`
&lt;/details&gt;</p>
<blockquote>
<div><p>&lt;br&gt;</p>
</div></blockquote>
<p><em>Output</em>
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id12"><span class="problematic" id="id13">``</span></a><a href="#id14"><span class="problematic" id="id15">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“name”: “KARMA”,
“symbol”: “KRM”,
“owner”: “bteam:org1MSP”,
“ethereumAddress”: “0x0”,
“totalSupply”: 99999999999999</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id16"><span class="problematic" id="id17">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### GET   -   <cite>/token/{tokenId}</cite></p>
<p>Gets all the token information</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token</p>
<p><em>Output</em>
- <cite>token</cite>    :  <cite>&lt;string&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id18"><span class="problematic" id="id19">``</span></a><a href="#id20"><span class="problematic" id="id21">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“name”: “KARMA”,
“symbol”: “KRM”,
“owner”: “bteam:org1MSP”,
“ethereumAddress”: “0x0”,
“totalSupply”: 99999999999999</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id22"><span class="problematic" id="id23">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### GET   -   <cite>/token/{tokenId}/allowance/{owner}/{spender}</cite></p>
<p>This call tells if some specific spender is allowed by some owner to performs actions over the token.</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>ownerId</cite>   :  <cite>&lt;string&gt;</cite>  Owner of the token
- <cite>spenderId</cite> :  <cite>&lt;string&gt;</cite>  Person from whom we want to know how much he is allowed to spend</p>
<p><em>Output</em>
- <cite>allowed</cite>  : <cite>&lt;integer&gt;</cite> Quantity of tokens he is allowed to spend</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id24"><span class="problematic" id="id25">``</span></a><a href="#id26"><span class="problematic" id="id27">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“allowed”: 230</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</div>
<div class="section" id="id28">
<h1>}<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/approve</cite>
Approve a different spender for a amount of token you own</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>spender</cite> :  <cite>&lt;string&gt;</cite> Name of the spender user
- <cite>value</cite>   :  <cite>&lt;int&gt;</cite>    Amount that is allowed to spend</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a>js
{</p>
<blockquote>
<div><p>“spender”: “Satoshi:org1MSP”,
“value”: “20”</p>
</div></blockquote>
<p>}</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a>`
&lt;/details&gt;
&lt;br&gt;</p>
<p><em>Output</em>
- <cite>id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite>  Message of the approve transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“id”: “eaff9d6d289ca1894cffb4bbx0e540de4f58f69eb067a23efba2b7581c77e398”,
“message”: “Approve 230 from bteam:org1MSP to Satoshi:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
<p><a href="#id39"><span class="problematic" id="id40">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### GET   -   <cite>/token/{tokenId}/balance/{userID}</cite>
Gets the token balance of a user</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>userId</cite>  :  <cite>&lt;string&gt;</cite>  Name of the user</p>
<p><em>Output</em>
- <cite>balance</cite>    :  <cite>&lt;integer&gt;</cite>  User’s balance
- <cite>blocked_balance</cite>    :  <cite>&lt;integer&gt;</cite>  User’s blocked balance</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“balance”: 950,
“blocked_balance”: 50</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### GET   -   <cite>/token/{tokenId}/transactions</cite>
Get the token transaction history</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Id of the token</p>
<p><em>Output</em>
- <cite>list</cite> :  <cite>&lt;json&gt;</cite>  List of transactions of the token</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id47"><span class="problematic" id="id48">``</span></a><a href="#id49"><span class="problematic" id="id50">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl>
<dt>“output”: [</dt><dd><dl class="simple">
<dt>{</dt><dd><p>“id”: “eaff9d6d289ca4894cffb4bbb0e540de4f58f69eb067a23efba2b7581c77e398”,
“message”: “Approve 20 from bteam:org1MSP to Satoshi:org1MSP”</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“id”: “5aa6239bb3c45647ab4ffa52759fc1fc981c28f8beb0724765b0c4505fca5a13”,
“message”: “Transfer 40 from bteam:org1MSP to Bob:org1MSP”</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“id”: “bb7f630b44a42b67abd437d4d9afb0b515fcd4b5794dd8cd6e3bf4f3510c5146”,
“message”: “Transfer 40 from bteam:org1MSP to Alice:org1MSP”</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>]</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/transfer</cite>
Transfers individual tokens (balances of a token class)</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>to</cite>      :  <cite>&lt;string&gt;</cite>  Destination user
- <cite>value</cite>   :  <cite>&lt;string&gt;</cite>  Balance to transfer</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a>js</p>
<dl class="simple">
<dt>{</dt><dd><p>“to”: “Alice:org1MSP”,
“value”: “40”</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id57"><span class="problematic" id="id58">``</span></a>`
&lt;/details&gt; &lt;br&gt;</p>
<p><em>Output</em>
- <cite>id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite>  Message of the approve transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id59"><span class="problematic" id="id60">``</span></a><a href="#id61"><span class="problematic" id="id62">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“id”: “bb7f630b44a42b67abd437d4d9afb0b515fcd4b5794dd8cd6e3bf4f3510c5146”,
“message”: “Transfer 40 from bteam:org1MSP to Alice:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
<p><a href="#id63"><span class="problematic" id="id64">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/transferfrom</cite></p>
<p>Transfer / withdraw from a user. The user has to be approved to spend individual tokens</p>
<p><em>Input</em>
- <cite>from</cite> :  <cite>&lt;string&gt;</cite>  Person who approves to spend. He has to have a positive balance
- <cite>to</cite>   :  <cite>&lt;string&gt;</cite>  Destination user of the funds
- <cite>value</cite>:  <cite>&lt;string&gt;</cite>  Amount of tokens</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id65"><span class="problematic" id="id66">``</span></a><a href="#id67"><span class="problematic" id="id68">`</span></a>js
{</p>
<blockquote>
<div><p>“from”: “bteam:org1MSP”,
“to”: “Satoshi:org1MSP”,
“value”: “20”</p>
</div></blockquote>
<p>}</p>
<p><a href="#id69"><span class="problematic" id="id70">``</span></a>`
&lt;/details&gt;&lt;br&gt;</p>
<p><em>Output</em>
- <cite>id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite>  Message of the approve transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“id”: “7876322dbfe61fd2c293f63fd148875d36b3d4fbcec6635d55351bfab2e9e713”,
“message”: “TransferFrom 20 from bteam:org1MSP to Satoshi:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id75">
<h1>}<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/transferownership</cite></p>
<p>Transfer the ownership of a generic token</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>to</cite>      :  <cite>&lt;string&gt;</cite>  New owner</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id76"><span class="problematic" id="id77">``</span></a><a href="#id78"><span class="problematic" id="id79">`</span></a>js</p>
<dl class="simple">
<dt>{</dt><dd><p>“to”: “Bob:org1MSP”,</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id80"><span class="problematic" id="id81">``</span></a>`
&lt;/details&gt;&lt;br&gt;</p>
<p><em>Output</em>
- <cite>token</cite>  :  <cite>&lt;json&gt;</cite>  Token with updated parameters</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id82"><span class="problematic" id="id83">``</span></a><a href="#id84"><span class="problematic" id="id85">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“ethereumAddress”: “0x0”,
“name”: “KARMA”,
“owner”: “Bob:org1MSP”,
“symbol”: “KRM”,
“totalSupply”: 99999999999999</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</div>
<div class="section" id="id86">
<h1>}<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/transferblock</cite></p>
<p>Transfer individual tokens as a blocked balance for a user</p>
<p><em>Input</em>
- <cite>tokenId</cite> :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>to</cite>      :  <cite>&lt;string&gt;</cite>  Destination user of the blocked funds
- <cite>value</cite>   :  <cite>&lt;string&gt;</cite>  Amount of tokens to be blocked</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id87"><span class="problematic" id="id88">``</span></a><a href="#id89"><span class="problematic" id="id90">`</span></a>js</p>
<dl class="simple">
<dt>{</dt><dd><p>“to”:”Alice:org1MSP”,
“value”:”50”</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id91"><span class="problematic" id="id92">``</span></a>`
&lt;/details&gt;&lt;br&gt;</p>
<p><em>Output</em>
- <cite>blocked_id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite>  Message of the approve transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id93"><span class="problematic" id="id94">``</span></a><a href="#id95"><span class="problematic" id="id96">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“blocked_id”: “7c76500379b86967c04490baa1d25ecc52adfc9df9340d561805b548d8c87e72”,
“id”: “7c76500379b86967c04490baa1d25ecc52adfc9df9340d561805b548d8c87e72”,
“message”: “Blocking transfer 50 from bteam:org1MSP to Alice:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id97">
<h1>}<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>#### POST   -   <cite>/token/{tokenId}/transferunblock</cite></p>
<p>Unblocks a blocked transfer being true equivalent to accept the blocked balance and false equivalent to returning the blocked balance to origin user</p>
<p><em>Input</em>
- <cite>tokenId</cite>     :  <cite>&lt;string&gt;</cite>  Name of the token
- <cite>blocked_id</cite>  :  <cite>&lt;string&gt;</cite>  Id of the blocked transaction
- <cite>accept</cite>      :  <cite>&lt;string&gt;</cite>  Flag to determine the acceptance or not of the transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id98"><span class="problematic" id="id99">``</span></a><a href="#id100"><span class="problematic" id="id101">`</span></a>js</p>
<dl class="simple">
<dt>{</dt><dd><p>“blocked_id”: “b1cdd2e5df1d7565edb2c54ee39c0ab9931ea647d04627062cb52500ee82c0af”,
“accept”: “true”</p>
</dd>
</dl>
<p>}</p>
<p><a href="#id102"><span class="problematic" id="id103">``</span></a>`
&lt;/details&gt;</p>
<p><em>Output</em>
- <cite>id</cite>    :  <cite>&lt;string&gt;</cite>  Id of the transaction
- <cite>message</cite>    :  <cite>&lt;string&gt;</cite>  Message of the approve transaction</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id104"><span class="problematic" id="id105">``</span></a><a href="#id106"><span class="problematic" id="id107">`</span></a>js</p>
<dl>
<dt>{</dt><dd><dl class="simple">
<dt>“output”: {</dt><dd><p>“id”: “e309a55be8b1c842c3aaf475bb7b7b2b759101b09f622fbb5f8dc56aab3d3795”,
“message”: “Accepting blocked transaction b1cdd2e5df0d7565bdb2c54ee39c0ab9931ea647d04627062cb52500ee82c0af from bteam:org1MSP and token amount goes to bteam:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</div>
<div class="section" id="id108">
<h1>}<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;/details&gt;
&lt;br&gt;</p>
<p>## Architecture of the project
The project is based on the open-source programming language: Golang. An abstraction of its skeleton is depicted in the diagram below.</p>
<p><a href="#id109"><span class="problematic" id="id110">``</span></a>`
coren-tokenapi
├── api</p>
<blockquote>
<div><p>├── handler           // HTTP logic
├── model             // models used by the application
├── service           // Usecases logic
├── util              // Tools used by the application</p>
<blockquote>
<div><p>├── log           // Logger tool
├── http          // Http util
└── Config        // Tool to load the configuration from yaml files</p>
</div></blockquote>
<p>└── app.go            // Router application</p>
</div></blockquote>
<dl class="simple">
<dt>├── config</dt><dd><p>└── config.yaml       // Config file</p>
</dd>
<dt>├── docs</dt><dd><p>└── docs.go           // Swagger doc file</p>
</dd>
<dt>├── postman                 // Postman collection and environment to test the API</dt><dd><p>├── collection
└── environment</p>
</dd>
</dl>
<p>├── docker-compose.yaml     // Instructions to build docker container
├── Dockerfile              // Instructions to build docker image
├── init.sh                 // Script with global environment variables
└── main.go                 // Main app</p>
<blockquote>
<div><p><a href="#id111"><span class="problematic" id="id112">``</span></a><a href="#id113"><span class="problematic" id="id114">`</span></a></p>
</div></blockquote>
<p>## How we run the application
As you could see in the [Architecture](architecture.html) module, all the applications are running on cloud. Through Kubernetes orchestration system the application deployment, scaling and management is an easy and automated task.</p>
<p>## Testing the Application
In postman folder there are the collection and environment to interact and test with the API methods. It is only needed to import them into postman application and know to use the coren-tokenapi module</p>
<p>Also you can download the files in the links below:</p>
<p>&lt;a href=”_static/tokenapi.collection.json” download&gt; - Postman collection&lt;/a&gt;
&lt;br&gt;
&lt;a href=”_static/environment.json” download&gt; - Postman environment&lt;/a&gt;</p>
<p>## Errors management</p>
<blockquote>
<div><p>Token API errors are managed through the following nomenclature <strong>TOKEN-XX</strong> which corresponds to:&lt;br&gt;</p>
</div></blockquote>
<p>&lt;style type=”text/css”&gt;
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
.tg .tg-0lax{text-align:left;vertical-align:top}
&lt;/style&gt;
&lt;table class=”tg”&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>&lt;tr&gt;</dt><dd><p>&lt;th class=”tg-0pky”&gt;Code&lt;/th&gt;
&lt;th class=”tg-0pky”&gt;Description&lt;/th&gt;</p>
</dd>
</dl>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0pky”&gt;TOKEN-00&lt;/td&gt;
&lt;td class=”tg-0pky”&gt;Service is down&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0pky”&gt;TOKEN-01&lt;/td&gt;
&lt;td class=”tg-0pky”&gt;Error parsing any data structure&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0lax”&gt;TOKEN-02&lt;/td&gt;
&lt;td class=”tg-0lax”&gt;Error of some kind of functionality&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;</p>
</div></blockquote>
<p>&lt;/table&gt;</p>
<p>&lt;br&gt;</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="settle.html" class="btn btn-neutral float-right" title="}" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="track.html" class="btn btn-neutral" title="}" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <!-- <div role="contentinfo">
    <p>
        &copy; Copyright Telefónica 2020.

    </p>
  </div> -->
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>