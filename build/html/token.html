

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Token &mdash; trustos master documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Settle" href="settle.html" />
    <link rel="prev" title="Track" href="track.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> trustos
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br>
<a style="width:100%;" href="index.html">
    <h1 style="color: white; font-size:220%; margin-bottom:2px;">TrustOS</h1>
</a>
<img style="background:none; margin: auto;  width:30%; height:95%;" alt="Telefónica"
    src="_static/images/telefonica_white.png" />

<!-- 
<a href="https://github.com/hyperledger/fabric"></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a> -->


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html">Track</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Token</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-specification">API Specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-methods">API Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#post-token-create">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/create</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-token-tokenid">GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-token-tokenid-allowance-owner-spender">GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/allowance/{owner}/{spender}</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-approve">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/approve</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-token-tokenid-balance-userid">GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/balance/{userID}</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-token-tokenid-transactions">GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transactions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-transfer">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transfer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-transferfrom">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferfrom</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-transferownership">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferownership</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-transferblock">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferblock</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-token-tokenid-transferunblock">POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferunblock</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#architecture-of-the-project">Architecture of the project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-we-run-the-application">How we run the application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-the-application">Testing the Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#errors-management">Errors management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settle.html">Settle</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html">Cert</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html">TrustID</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trustos</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Token</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/token.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="token">
<h1>Token<a class="headerlink" href="#token" title="Permalink to this headline">¶</a></h1>
<p>Token API allows developers to easily create, transfer and get transferable tokens on the Hyperledger Fabric network. Through this API giving transferable value to simple assets can generate new markets and gamification strategies.</p>
<div class="section" id="api-specification">
<h2>API Specification<a class="headerlink" href="#api-specification" title="Permalink to this headline">¶</a></h2>
<p>An abstraction API with all the token functionalities.</p>
<div class="section" id="id1">
<h3>Token<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>A token is an asset that gets a transferable value on the blockchain network and can represent whatever it can be imagined, either an abstract or real/physic thing. The term is a little bit confusing at first, since a token can represent the whole class, in which the total supply is declarated, or individual tokens (balances) transferable between users.</p>
<p>Every token has the following structure:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the generic token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symbol</span></code> : <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Shortname for the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code> :  <code class="docutils literal notranslate"><span class="pre">id&lt;string&gt;:company&lt;string&gt;</span></code>  Owner of the token. It has to be specified the ID of the owner and the ID of the organization it belongs to inside the organization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ethereumAddress</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Address in the Ethereum blockchain, in case we want to link it to a public blockchain token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">totalSupply</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code> Total number of individual tokens issued</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KARMA&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="o">:</span> <span class="s2">&quot;KRM&quot;</span><span class="p">,</span>
      <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;bteam:org1MSP&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ethereumAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x320aty492ua90suf9a0veuf903as3q82&quot;</span><span class="p">,</span>
      <span class="s2">&quot;totalSupply&quot;</span><span class="o">:</span> <span class="mi">99999999999999</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
<br></div>
</div>
<div class="section" id="api-methods">
<h2>API Methods<a class="headerlink" href="#api-methods" title="Permalink to this headline">¶</a></h2>
<p><img alt="TokenAPI methods" src="_images/token_swagger.png" /></p>
<details>
  <summary><em><strong>Token methods</strong></em> (Click to expand)</summary><hr class="docutils" />
<div class="section" id="post-token-create">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/create</span></code><a class="headerlink" href="#post-token-create" title="Permalink to this headline">¶</a></h3>
<p>Initialize a new token in the network with some specific information</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symbol</span></code> : <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Shortname of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code> :  <code class="docutils literal notranslate"><span class="pre">identifier&lt;string&gt;:company&lt;string&gt;</span></code> Owner of the token contract</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ethereumAddress</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> This address represents the smart contract in Ethereum associated to the token. At the moment is given as an input, but in future releases it will be created by the chaincode and given to the developer as a response</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">totalSupply</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code>  Total amount of individual tokens that will be created</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KARMA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;symbol&quot;</span><span class="o">:</span> <span class="s2">&quot;KRM&quot;</span><span class="p">,</span>
  <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;bteam:org1MSP&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ethereumAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;totalSupply&quot;</span><span class="o">:</span> <span class="mi">99999999999999</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
 <br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KARMA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;symbol&quot;</span><span class="o">:</span> <span class="s2">&quot;KRM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;bteam:org1MSP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ethereumAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;totalSupply&quot;</span><span class="o">:</span> <span class="mi">99999999999999</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-token-tokenid">
<h3>GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}</span></code><a class="headerlink" href="#get-token-tokenid" title="Permalink to this headline">¶</a></h3>
<p>Gets all the token information</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">token</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KARMA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;symbol&quot;</span><span class="o">:</span> <span class="s2">&quot;KRM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;bteam:org1MSP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ethereumAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;totalSupply&quot;</span><span class="o">:</span> <span class="mi">99999999999999</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-token-tokenid-allowance-owner-spender">
<h3>GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/allowance/{owner}/{spender}</span></code><a class="headerlink" href="#get-token-tokenid-allowance-owner-spender" title="Permalink to this headline">¶</a></h3>
<p>This call tells if some specific spender is allowed by some owner to performs actions over the token.</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ownerId</span></code>   :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Owner of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spenderId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Person from whom we want to know how much he is allowed to spend</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">allowed</span></code>  : <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code> Quantity of tokens he is allowed to spend</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;allowed&quot;</span><span class="o">:</span> <span class="mi">230</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-approve">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/approve</span></code><a class="headerlink" href="#post-token-tokenid-approve" title="Permalink to this headline">¶</a></h3>
<p>Approve a different spender for a amount of token you own</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spender</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> Name of the spender user</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>   :  <code class="docutils literal notranslate"><span class="pre">&lt;int&gt;</span></code>    Amount that is allowed to spend</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;spender&quot;</span><span class="o">:</span> <span class="s2">&quot;Satoshi:org1MSP&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;20&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
<br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Message of the approve transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;eaff9d6d289ca1894cffb4bbx0e540de4f58f69eb067a23efba2b7581c77e398&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Approve 230 from bteam:org1MSP to Satoshi:org1MSP&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-token-tokenid-balance-userid">
<h3>GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/balance/{userID}</span></code><a class="headerlink" href="#get-token-tokenid-balance-userid" title="Permalink to this headline">¶</a></h3>
<p>Gets the token balance of a user</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">userId</span></code>  :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the user</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">balance</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code>  User’s balance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blocked_balance</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code>  User’s blocked balance</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;balance&quot;</span><span class="o">:</span> <span class="mi">950</span><span class="p">,</span>
    <span class="s2">&quot;blocked_balance&quot;</span><span class="o">:</span> <span class="mi">50</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="get-token-tokenid-transactions">
<h3>GET   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transactions</span></code><a class="headerlink" href="#get-token-tokenid-transactions" title="Permalink to this headline">¶</a></h3>
<p>Get the token transaction history</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the token</p></li>
</ul>
<p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code>  List of transactions of the token</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;eaff9d6d289ca4894cffb4bbb0e540de4f58f69eb067a23efba2b7581c77e398&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Approve 20 from bteam:org1MSP to Satoshi:org1MSP&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;5aa6239bb3c45647ab4ffa52759fc1fc981c28f8beb0724765b0c4505fca5a13&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Transfer 40 from bteam:org1MSP to Bob:org1MSP&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;bb7f630b44a42b67abd437d4d9afb0b515fcd4b5794dd8cd6e3bf4f3510c5146&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Transfer 40 from bteam:org1MSP to Alice:org1MSP&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-transfer">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transfer</span></code><a class="headerlink" href="#post-token-tokenid-transfer" title="Permalink to this headline">¶</a></h3>
<p>Transfers individual tokens (balances of a token class)</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>      :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Destination user</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>   :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Balance to transfer</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;Alice:org1MSP&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;40&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</details> <br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Message of the approve transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;bb7f630b44a42b67abd437d4d9afb0b515fcd4b5794dd8cd6e3bf4f3510c5146&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Transfer 40 from bteam:org1MSP to Alice:org1MSP&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-transferfrom">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferfrom</span></code><a class="headerlink" href="#post-token-tokenid-transferfrom" title="Permalink to this headline">¶</a></h3>
<p>Transfer / withdraw from a user. The user has to be approved to spend individual tokens</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Person who approves to spend. He has to have a positive balance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>   :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Destination user of the funds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>:  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Amount of tokens</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="s2">&quot;bteam:org1MSP&quot;</span><span class="p">,</span>
  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;Satoshi:org1MSP&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;20&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</details><br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Message of the approve transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;7876322dbfe61fd2c293f63fd148875d36b3d4fbcec6635d55351bfab2e9e713&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;TransferFrom 20 from bteam:org1MSP to Satoshi:org1MSP&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-transferownership">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferownership</span></code><a class="headerlink" href="#post-token-tokenid-transferownership" title="Permalink to this headline">¶</a></h3>
<p>Transfer the ownership of a generic token</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>      :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  New owner</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob:org1MSP&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</details><br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">token</span></code>  :  <code class="docutils literal notranslate"><span class="pre">&lt;json&gt;</span></code>  Token with updated parameters</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;ethereumAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KARMA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob:org1MSP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;symbol&quot;</span><span class="o">:</span> <span class="s2">&quot;KRM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;totalSupply&quot;</span><span class="o">:</span> <span class="mi">99999999999999</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-transferblock">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferblock</span></code><a class="headerlink" href="#post-token-tokenid-transferblock" title="Permalink to this headline">¶</a></h3>
<p>Transfer individual tokens as a blocked balance for a user</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code> :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>      :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Destination user of the blocked funds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>   :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Amount of tokens to be blocked</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
	<span class="s2">&quot;to&quot;</span><span class="o">:</span><span class="s2">&quot;Alice:org1MSP&quot;</span><span class="p">,</span>
	<span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="s2">&quot;50&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</details><br><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">blocked_id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Message of the approve transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;blocked_id&quot;</span><span class="o">:</span> <span class="s2">&quot;7c76500379b86967c04490baa1d25ecc52adfc9df9340d561805b548d8c87e72&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;7c76500379b86967c04490baa1d25ecc52adfc9df9340d561805b548d8c87e72&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Blocking transfer 50 from bteam:org1MSP to Alice:org1MSP&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></div>
<hr class="docutils" />
<div class="section" id="post-token-tokenid-transferunblock">
<h3>POST   -   <code class="docutils literal notranslate"><span class="pre">/token/{tokenId}/transferunblock</span></code><a class="headerlink" href="#post-token-tokenid-transferunblock" title="Permalink to this headline">¶</a></h3>
<p>Unblocks a blocked transfer being true equivalent to accept the blocked balance and false equivalent to returning the blocked balance to origin user</p>
<p><u><em>Input</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tokenId</span></code>     :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Name of the token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blocked_id</span></code>  :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the blocked transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accept</span></code>      :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Flag to determine the acceptance or not of the transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;blocked_id&quot;</span><span class="o">:</span> <span class="s2">&quot;b1cdd2e5df1d7565edb2c54ee39c0ab9931ea647d04627062cb52500ee82c0af&quot;</span><span class="p">,</span>
  <span class="s2">&quot;accept&quot;</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</details><p><u><em>Output</em></u></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Id of the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code>    :  <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code>  Message of the approve transaction</p></li>
</ul>
<details>
  <summary><em><strong>Sample structure</strong></em> (Click to expand)</summary><div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;e309a55be8b1c842c3aaf475bb7b7b2b759101b09f622fbb5f8dc56aab3d3795&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;Accepting blocked transaction b1cdd2e5df0d7565bdb2c54ee39c0ab9931ea647d04627062cb52500ee82c0af from bteam:org1MSP and token amount goes to bteam:org1MSP&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
</details>
<br></div>
</div>
<div class="section" id="architecture-of-the-project">
<h2>Architecture of the project<a class="headerlink" href="#architecture-of-the-project" title="Permalink to this headline">¶</a></h2>
<p>The project is based on the open-source programming language: Golang. An abstraction of its skeleton is depicted in the diagram below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>coren-tokenapi
├── api
      ├── handler           // HTTP logic
      ├── model             // models used by the application
      ├── service           // Usecases logic
      ├── util              // Tools used by the application
          ├── log           // Logger tool
          ├── http          // Http util
          └── Config        // Tool to load the configuration from yaml files
      └── app.go            // Router application
├── config
      └── config.yaml       // Config file
├── docs
      └── docs.go           // Swagger doc file
├── postman                 // Postman collection and environment to test the API
      ├── collection    
      └── environment
├── docker-compose.yaml     // Instructions to build docker container
├── Dockerfile              // Instructions to build docker image
├── init.sh                 // Script with global environment variables
└── main.go                 // Main app
</pre></div>
</div>
</div>
<div class="section" id="how-we-run-the-application">
<h2>How we run the application<a class="headerlink" href="#how-we-run-the-application" title="Permalink to this headline">¶</a></h2>
<p>As you could see in the <a class="reference external" href="architecture.html">Architecture</a> module, all the applications are running on cloud. Through Kubernetes orchestration system the application deployment, scaling and management is an easy and automated task.</p>
</div>
<div class="section" id="testing-the-application">
<h2>Testing the Application<a class="headerlink" href="#testing-the-application" title="Permalink to this headline">¶</a></h2>
<p>In postman folder there are the collection and environment to interact and test with the API methods. It is only needed to import them into postman application and know to use the coren-tokenapi module</p>
<p>Also you can download the files in the links below:</p>
<p><a href="_static/tokenapi.collection.json" download> - Postman collection</a>
<br>
<a href="_static/environment.json" download> - Postman environment</a></p>
</div>
<div class="section" id="errors-management">
<h2>Errors management<a class="headerlink" href="#errors-management" title="Permalink to this headline">¶</a></h2>
<p>Token API errors are managed through the following nomenclature <strong>TOKEN-XX</strong> which corresponds to:<br></p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
.tg .tg-0lax{text-align:left;vertical-align:top}
</style><table class="tg">
  <tr>
    <th class="tg-0pky">Code</th>
    <th class="tg-0pky">Description</th>
  </tr>
  <tr>
    <td class="tg-0pky">TOKEN-00</td>
    <td class="tg-0pky">Service is down</td>
  </tr>
  <tr>
    <td class="tg-0pky">TOKEN-01</td>
    <td class="tg-0pky">Error parsing any data structure</td>
  </tr>
  <tr>
    <td class="tg-0lax">TOKEN-02</td>
    <td class="tg-0lax">Error of some kind of functionality</td>
  </tr>
</table><br></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="settle.html" class="btn btn-neutral float-right" title="Settle" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="track.html" class="btn btn-neutral" title="Track" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <!-- <div role="contentinfo">
    <p>
        &copy; Copyright Telefónica 2020.

    </p>
  </div> -->
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>